<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"   >
<head>
	<meta name="format-detection" content="telephone-no">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1" />

	<meta name="apple-mobile-web-app-capable" content="yes" />
	<link rel="stylesheet" href="css/reset.css" type="text/css" /> 
	
	<title>save image test</title>
	
	<script src="js/jquery-1.8.2.min.js" type="text/javascript"></script>
	<script src="phonegap.js" type="text/javascript"></script>
	<script src="js/jquery.md5.js" type="text/javascript"></script>
	<script src="js/fastclick.js" type="text/javascript"></script>
	<script type="text/javascript" src="js/jquery.blockUI.js"></script>
	<script src="js/gapfile.js" type="text/javascript"></script>
	<script src="js/download_cache.js" type="text/javascript"></script>
<!--
  <script type="text/javascript">
 	   function OnLoad(){
		 document.addEventListener('deviceready', function(){
			 cordova.plugins.ZoomControl.ZoomControl("true");
		 }, function(){
			 alert('error deviceready');
		 });
		 
	   }
	</script>
-->

	<script type="text/javascript">
		image_list=new Array();
		image_list_text="";
		download_list=new Array();
		download_list_text="";

////////////////////////////////////////////////////////////////////////////////////////////
// START preloader ://///////////////////////////////////////////////////////////
		function blockui() {
			$.blockUI({
				message: '<img src="img/preloader.gif"/>',
				css: {
					color: '#fff',
					backgroundColor: '#fff',
					border: 'none'
				},
				overlayCSS: {
					backgroundColor: '#fff',
					opacity: 1
				}
			});
		}
		function unblockui(next) {
			$.unblockUI();
			next();
		}
// END preloader ://///////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////

		function GapFileSuccess(){
				//alert("we have some no problem");
		}
		function init() {			
			console.log('SMGROUP ::::::::::::::::::::::::::::::::::::    start init()');
			document.addEventListener("deviceready", onDeviceReady, false);
			//document.addEventListener("DOMContentLoaded", loaded, false);
		}
		function onDeviceReady() {


			FastClick.attach(document.body);
			
			console.log('SMGROUP ::::::::::::::::::::::::::::::::::::    start onDeviceReady');
			var applaunchCount = window.localStorage.getItem('launchCount');
			var applaunchCount2 = window.localStorage.getItem('applaunchCount2');
			window.localStorage.setItem('image_list_text',"");
			window.localStorage.setItem('download_list_text',"");

			//Check if it already exists or not
			if(applaunchCount){
				var temp = parseInt(applaunchCount2, 10);
				temp = temp +1;
				window.localStorage.setItem('applaunchCount2',temp);
				console.log('SMGROUP ::::::::::::::::::::::::::::::::::::    second run : ' + temp);
				$("#result").html('second run : ' + temp);
			}else{
				GapFile.mkDirectory("temp", GapFileSuccess, GapFileSuccess);

				window.localStorage.setItem('launchCount',1);
				window.localStorage.setItem('applaunchCount2',1);
				console.log('SMGROUP ::::::::::::::::::::::::::::::::::::    first run');
				$("#result").html('first run');
			}

			


			function StartMakeImageList(next) {			
				console.log('SMGROUP ::::::::::::::::::::::::::::::::::::    GetSavedFile 139304141755349c3.jpg');
				GetSavedFile("http://farsi.khamenei.ir/ndata/home/1393/139304141755349c3.jpg", "temp", $.md5("http://farsi.khamenei.ir/ndata/home/1393/139304141755349c3.jpg")  );
				console.log('SMGROUP ::::::::::::::::::::::::::::::::::::    GetSavedFile sprites.png');
				GetSavedFile("http://cdn.sstatic.net/stackoverflow/img/sprites.png", "temp", $.md5("http://cdn.sstatic.net/stackoverflow/img/sprites.png")  );
				console.log('SMGROUP ::::::::::::::::::::::::::::::::::::    GetSavedFile aebd5dee718eb3c06cd5551460b9b43de061f8fc__17__0.txt');
				GetSavedFile("http://ar.hamshahri.org/asset/json_data/aebd5dee718eb3c06cd5551460b9b43de061f8fc__17__0.txt","temp", $.md5("http://ar.hamshahri.org/asset/json_data/aebd5dee718eb3c06cd5551460b9b43de061f8fc__17__0.txt")  );
				console.log('SMGROUP ::::::::::::::::::::::::::::::::::::    GetSavedFile 1393040918166a8e3.jpg');
				GetSavedFile("http://farsi.khamenei.ir/ndata/home/1393/1393040918166a8e3.jpg","temp", $.md5("http://farsi.khamenei.ir/ndata/home/1393/1393040918166a8e3.jpg")  );
				console.log('SMGROUP ::::::::::::::::::::::::::::::::::::    END GetSavedFile');
				next();				
			}
			function StartShowList(next) {
				//window.localStorage.setItem('download_list_text',download_list_text.join('; -,'));
				image_list_text = window.localStorage.getItem('image_list_text');
				image_list = image_list_text.split('; -,');
				download_list_text = window.localStorage.getItem('download_list_text');
				download_list = download_list_text.split('; -,');
				console.log('SMGROUP ::::::::::::::::::::::::::::::::::::    download_list_text : ' + download_list_text);
				//temp
				
				var image_list_temp = "";
				var download_list_temp = "";

				$.each( image_list, function( i, val ){
					image_list_temp = image_list_temp + "<br/>" + "image Index #" + i + ": " + val ;
					console.log('SMGROUP ::::::::::::::::::::::::::::::::::::    image_list_temp add ' + val);
				});
				console.log('SMGROUP ::::::::::::::::::::::::::::::::::::    image_list_temp all ' + image_list_temp);
				$.each( download_list, function( i, val ){
					download_list_temp = download_list_temp + "<br/>" + "download Index #" + i + ": " + val ;
					console.log('SMGROUP ::::::::::::::::::::::::::::::::::::    download_list_temp add ' + val);
				});
				console.log('SMGROUP ::::::::::::::::::::::::::::::::::::    download_list_temp all ' + image_list_temp);
				$("#result_download").html("test :<br/>" + image_list_temp + download_list_temp);
				next();
			}
			function StartDownload(next) {
				download_list_text = window.localStorage.getItem('download_list_text');
				console.log('SMGROUP ::::::::::::::::::::::::::::::::::::    download_list2 : ' + download_list_text);

				//alert(download_list2);
				if(download_list_text){
					download_list = download_list_text.split('; -,');
					$.each( download_list, function( i, val ){
						DownloadFile(val, "temp", $.md5(val)  );
						//alert(val);
						console.log('SMGROUP ::::::::::::::::::::::::::::::::::::    ask for DownloadFile : ' + val);
					});
				}
				next();
			}
			$('#temp').queue(StartMakeImageList).delay( 1500 ).queue(StartShowList).queue(unblockui).queue(StartDownload);
			
			
		}
	
	

	
	

		//after DOM Loaded
		function loaded2() {
			//alert('DOM Loaded 2');
			console.log('SMGROUP ::::::::::::::::::::::::::::::::::::    DOM Loaded 2');



		}
	</script>
	<style>
		#main{
			max-width:1200px;
			margin:0 auto;
		}
	</style>
</head>
<body onload="init()">
	<script>blockui();</script>

	<div id="temp"></div>
	<div id="main">
	<br/><br/><br/><br/><br/><br/><br/>

		<div id="result" onclick="alert('salam');">start00000000</div>
		<br/><br/>
		<div id="result_download" >result_download</div>
		<!--
		<img style="height:600px;" id="smallImage" src="cdvfile://localhost/persistent/Pictures/test768.png" />
		<img style="height:600px;"  			   src="http://cdn.sstatic.net/stackoverflow/img/sprites.png" />
		-->
		<div id="wrapper" style="width:100%;margin:0;">
			<p>
				<a href="00.html" >aaaaaaaaaaaaaaaaaaaaaaaaaa</a>
			</p>
			<p>اگر شما بانوى نخبه‌ى اسلامى تلاش كنيد كه هويت اسلامی را به زن مسلمان برگردانيد، بزرگترين خدمت را به امت اسلامى و به بيدارى اسلامى و به عزت و كرامت اسلامى كرديد.اگر شما بانوى نخبه‌ى اسلامى تلاش كنيد كه هويت اسلامی را به زن مسلمان برگردانيد، بزرگترين خدمت را به امت اسلامى و به بيدارى اسلامى و به عزت و كرامت اسلامى كرديد.اگر شما بانوى نخبه‌ى اسلامى تلاش كنيد كه هويت اسلامی را به زن مسلمان برگردانيد، بزرگترين خدمت را به امت اسلامى و به بيدارى اسلامى و به عزت و كرامت اسلامى كرديد.اگر شما بانوى نخبه‌ى اسلامى تلاش كنيد كه هويت اسلامی را به زن مسلمان برگردانيد، بزرگترين خدمت را به امت اسلامى و به بيدارى اسلامى و به عزت و كرامت اسلامى كرديد.اگر شما بانوى نخبه‌ى اسلامى تلاش كنيد كه هويت اسلامی را به زن مسلمان برگردانيد، بزرگترين خدمت را به امت اسلامى و به بيدارى اسلامى و به عزت و كرامت اسلامى كرديد 			اگر شما بانوى نخبه‌ى اسلامى تلاش كنيد كه هويت اسلامی را به زن مسلمان برگردانيد، بزرگترين خدمت را به امت اسلامى و به بيدارى اسلامى و به عزت و كرامت اسلامى كرديد.اگر شما بانوى نخبه‌ى اسلامى تلاش كنيد كه هويت اسلامی را به زن مسلمان برگردانيد، بزرگترين خدمت را به امت اسلامى و به بيدارى اسلامى و به عزت و كرامت اسلامى كرديد.اگر شما بانوى نخبه‌ى اسلامى تلاش كنيد كه هويت اسلامی را به زن مسلمان برگردانيد، بزرگترين خدمت را به امت اسلامى و به بيدارى اسلامى و به عزت و كرامت اسلامى كرديد.اگر شما بانوى نخبه‌ى اسلامى تلاش كنيد كه هويت اسلامی را به زن مسلمان برگردانيد، بزرگترين خدمت را به امت اسلامى و به بيدارى اسلامى و به عزت و كرامت اسلامى كرديد.اگر شما بانوى نخبه‌ى اسلامى تلاش كنيد كه هويت اسلامی را به زن مسلمان برگردانيد، بزرگترين خدمت را به امت اسلامى و به بيدارى اسلامى و به عزت و كرامت اسلامى كرديد اگر شما بانوى نخبه‌ى اسلامى تلاش كنيد كه هويت اسلامی را به زن مسلمان برگردانيد، بزرگترين خدمت را به امت اسلامى و به بيدارى اسلامى و به عزت و كرامت اسلامى كرديد.اگر شما بانوى نخبه‌ى اسلامى تلاش كنيد كه هويت اسلامی را به زن مسلمان برگردانيد، بزرگترين خدمت را به امت اسلامى و به بيدارى اسلامى و به عزت و كرامت اسلامى كرديد.اگر شما بانوى نخبه‌ى اسلامى تلاش كنيد كه هويت اسلامی را به زن مسلمان برگردانيد، بزرگترين خدمت را به امت اسلامى و به بيدارى اسلامى و به عزت و كرامت اسلامى كرديد.اگر شما بانوى نخبه‌ى اسلامى تلاش كنيد كه هويت اسلامی را به زن مسلمان برگردانيد، بزرگترين خدمت را به امت اسلامى و به بيدارى اسلامى و به عزت و كرامت اسلامى كرديد.اگر شما بانوى نخبه‌ى اسلامى تلاش كنيد كه هويت اسلامی را به زن مسلمان برگردانيد، بزرگترين خدمت را به امت اسلامى و به بيدارى اسلامى و به عزت و كرامت اسلامى كرديد</p>
			<p>اگر شما بانوى نخبه‌ى اسلامى تلاش كنيد كه هويت اسلامی را به زن مسلمان برگردانيد، بزرگترين خدمت را به امت اسلامى و به بيدارى اسلامى و به عزت و كرامت اسلامى كرديد.اگر شما بانوى نخبه‌ى اسلامى تلاش كنيد كه هويت اسلامی را به زن مسلمان برگردانيد، بزرگترين خدمت را به امت اسلامى و به بيدارى اسلامى و به عزت و كرامت اسلامى كرديد.اگر شما بانوى نخبه‌ى اسلامى تلاش كنيد كه هويت اسلامی را به زن مسلمان برگردانيد، بزرگترين خدمت را به امت اسلامى و به بيدارى اسلامى و به عزت و كرامت اسلامى كرديد.اگر شما بانوى نخبه‌ى اسلامى تلاش كنيد كه هويت اسلامی را به زن مسلمان برگردانيد، بزرگترين خدمت را به امت اسلامى و به بيدارى اسلامى و به عزت و كرامت اسلامى كرديد.اگر شما بانوى نخبه‌ى اسلامى تلاش كنيد كه هويت اسلامی را به زن مسلمان برگردانيد، بزرگترين خدمت را به امت اسلامى و به بيدارى اسلامى و به عزت و كرامت اسلامى كرديد</p>

		</div>
	</div>
	<script>loaded2();</script>
</body>
</html>
